<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cyber Speech Synthesizer</title>
<link rel="icon" href="icons/icon.png" />
<style>
@import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@500&display=swap');

body {
    margin: 0;
    font-family: 'Orbitron', sans-serif;
    background: #0d0d0d;
    color: #00ffe4;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 20px;
    min-height: 100vh;
}

h1 {
    font-size: 2.5rem;
    text-shadow: 0 0 10px #00ffe4, 0 0 20px #00ffe4;
    margin-bottom: 20px;
}

.glass-card {
    background: rgba(255, 255, 255, 0.05);
    border: 2px solid #00ffe4;
    border-radius: 15px;
    padding: 20px;
    display: flex;
    flex-direction: column;
    align-items: center;
    width: 90%;
    max-width: 700px;
    box-shadow: 0 0 20px #00ffe4;
    transition: 0.3s;
}

.glass-card:hover { box-shadow: 0 0 40px #00ffe4; }

textarea {
    width: 100%;
    height: 100px;
    background: rgba(255,255,255,0.05);
    border: 2px solid #00ffe4;
    border-radius: 10px;
    color: #00ffe4;
    padding: 10px;
    font-size: 1rem;
    resize: none;
    outline: none;
    transition: 0.2s;
}

textarea:focus { box-shadow: 0 0 15px #00ffe4; border-color: #00ffe4; }

input[type="range"], button {
    margin-top: 10px;
    padding: 10px 15px;
    font-size: 1rem;
    border-radius: 10px;
    border: 2px solid #00ffe4;
    background: rgba(255,255,255,0.05);
    color: #00ffe4;
    cursor: pointer;
    outline: none;
    transition: 0.3s;
}
input[list], input[type="text"] {
    margin-top: 10px;
    padding: 10px 15px;
    font-size: 1rem;
    border-radius: 10px;
    border: 2px solid #00ffe4;
    background: rgba(255,255,255,0.05);
    color: #00ffe4;
    cursor: text;
    outline: none;
    transition: 0.3s;

}
input[list]:hover, input[type="range"]:hover, button:hover {
    background: #00ffe4;
    color: #0d0d0d;
}

input[type="range"] { width: 80%; }

.controls { display: flex; flex-direction: column; align-items: center; width: 100%; }

.category-buttons { display: flex; flex-wrap: wrap; justify-content: center; margin-top: 15px; }
.category-buttons button { margin: 5px; }

canvas {
    margin-top: 20px;
    border: 1px solid #00ffe4;
    border-radius: 10px;
    background: #111;
}

.speaking { animation: pulseGlow 1s infinite alternate; }

@keyframes pulseGlow {
    from { box-shadow: 0 0 20px #00ffe4; }
    to { box-shadow: 0 0 40px #00ffe4; }
}
</style>
</head>
<body>
<h1>Cyber Speech Synthesizer</h1>

<div class="glass-card" id="card">
    <textarea id="textInput" placeholder="Type something to speak..."></textarea>

    <div class="controls">
        <input id="voiceInput" list="voiceSelect" placeholder="Type or choose a voice">
        <datalist id="voiceSelect"></datalist>

        <label>Pitch: <input type="range" id="pitchControl" min="0.5" max="2" step="0.05" value="1"></label>
        <label>Rate: <input type="range" id="rateControl" min="0.5" max="2" step="0.05" value="1"></label>
        <label>Volume: <input type="range" id="volumeControl" min="0" max="1" step="0.05" value="1"></label>

        <button onclick="speakText()">Speak</button>
    </div>

    <div class="category-buttons">
        <button onclick="speakCategory('male')">Male</button>
        <button onclick="speakCategory('female')">Female</button>
        <button onclick="speakCategory('child')">Child</button>
        <button onclick="speakCategory('old')">Old Man</button>
        <button onclick="speakCategory('random')">Random</button>
    </div>

    <canvas id="visualizer" width="600" height="100"></canvas>
</div>

<script>
const voiceInput = document.getElementById('voiceInput');
const voiceSelect = document.getElementById('voiceSelect');
const textInput = document.getElementById('textInput');
const pitchControl = document.getElementById('pitchControl');
const rateControl = document.getElementById('rateControl');
const volumeControl = document.getElementById('volumeControl');
const card = document.getElementById('card');
const canvas = document.getElementById('visualizer');
const ctx = canvas.getContext('2d');

let voices = [];
let visualizerRunning = false;
let bars = [];
const BAR_COUNT = 60;

function loadVoices() {
    voices = speechSynthesis.getVoices();
    voiceSelect.innerHTML = '';
    voices.forEach(v => {
        const option = document.createElement('option');
        option.value = v.name;
        voiceSelect.appendChild(option);
    });
}

if (speechSynthesis.getVoices().length === 0) {
    speechSynthesis.onvoiceschanged = loadVoices;
} else {
    loadVoices();
}

function getSelectedVoice() {
    return voices.find(v => v.name === voiceInput.value) || voices[0];
}

// Initialize AI-style bar heights
function initBars() {
    bars = [];
    for(let i=0;i<BAR_COUNT;i++){
        bars.push({height: Math.random()*canvas.height, speed: Math.random()*3+1});
    }
}

// Draw bars with smooth motion like an AI “thinking”
function drawVisualizer() {
    ctx.clearRect(0,0,canvas.width,canvas.height);
    const barWidth = canvas.width / BAR_COUNT;

    for(let i=0;i<BAR_COUNT;i++){
        const b = bars[i];
        // oscillate bars up and down smoothly
        b.height += b.speed * (Math.random()*0.6 + 0.7 - 1);
        if(b.height < 5) b.height = 5;
        if(b.height > canvas.height) b.height = canvas.height;

        const hue = 180 + (b.height / canvas.height) * 180;
        ctx.fillStyle = `hsl(${hue}, 100%, 50%)`;
        ctx.fillRect(i*barWidth, canvas.height - b.height, barWidth-2, b.height);
    }

    if(visualizerRunning) requestAnimationFrame(drawVisualizer);
}

function startVisualizer() {
    visualizerRunning = true;
    initBars();
    drawVisualizer();
}

function stopVisualizer() {
    visualizerRunning = false;
    ctx.clearRect(0,0,canvas.width,canvas.height);
}

function speakText() {
    const text = textInput.value.trim();
    if(!text) return alert("Please type something!");
    const utterance = new SpeechSynthesisUtterance(text);
    utterance.voice = getSelectedVoice();
    utterance.pitch = parseFloat(pitchControl.value);
    utterance.rate = parseFloat(rateControl.value);
    utterance.volume = parseFloat(volumeControl.value);

    card.classList.add('speaking');
    startVisualizer();
    utterance.onend = () => {
        card.classList.remove('speaking');
        stopVisualizer();
    }

    window.speechSynthesis.speak(utterance);
}

function speakCategory(category) {
    const text = textInput.value.trim();
    if (!text) return alert("Please type something!");
    const utterance = new SpeechSynthesisUtterance(text);

    let filteredVoices = [], pitch=1.0, rate=1.0;
    switch(category.toLowerCase()){
        case 'male': filteredVoices = voices.filter(v => /male|man/i.test(v.name)); pitch=0.8; rate=0.9; break;
        case 'female': filteredVoices = voices.filter(v => /female|woman/i.test(v.name)); pitch=1.2; rate=1.0; break;
        case 'child': filteredVoices = voices.filter(v => /child|young/i.test(v.name)); pitch=1.5; rate=1.3; break;
        case 'old': filteredVoices = voices.filter(v => /male|man/i.test(v.name)); pitch=0.6; rate=0.7; break;
        case 'random': filteredVoices = voices; pitch=Math.random()*0.5+0.8; rate=Math.random()*0.5+0.8; break;
    }

    if(!filteredVoices.length) filteredVoices = voices;
    utterance.voice = filteredVoices[Math.floor(Math.random()*filteredVoices.length)];
    utterance.pitch = pitch;
    utterance.rate = rate;
    utterance.volume = parseFloat(volumeControl.value);

    card.classList.add('speaking');
    startVisualizer();
    utterance.onend = () => {
        card.classList.remove('speaking');
        stopVisualizer();
    }

    window.speechSynthesis.speak(utterance);
}
</script>
</body>
</html>
