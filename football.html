<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cyber Football Game</title>
<link rel="icon" href="icons/icon.png" />
<style>
html, body {margin:0;padding:0;width:100%;height:100%;background:#000;overflow:hidden;font-family:'Orbitron',sans-serif;color:#0ff;}
canvas{position:absolute;top:0;left:0;width:100%;height:100%;display:block;}
#ui{position:absolute;top:10px;left:50%;transform:translateX(-50%);text-align:center;z-index:10;color:#0ff;font-size:24px;}
#menu, #gameOver{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);background:rgba(0,0,30,0.8);border:2px solid #0ff;border-radius:20px;padding:20px 40px;text-align:center;color:#0ff;}
button{background:#0ff;color:#000;border:none;border-radius:10px;padding:10px 20px;font-size:18px;margin:10px;cursor:pointer;font-family:'Orbitron',sans-serif;}
button:hover{background:#0cc;}
select{background:#000;color:#0ff;border:2px solid #0ff;border-radius:10px;padding:5px 10px;font-size:16px;margin:10px;font-family:'Orbitron',sans-serif;}
h1{margin-top:0;}
</style>
</head>
<body>
<canvas id="game"></canvas>
<div id="ui"><div id="score">0 : 0</div></div>
<div id="menu">
  <h1>⚡ Cyber Football Game ⚡</h1>
  <p>Select Mode</p>
  <button onclick="selectMode('pvp')">Player vs Player</button>
  <button onclick="selectMode('pvai')">Player vs AI</button>
  <button onclick="selectMode('aivai')">AI vs AI</button>
  <div id="difficultyDiv" style="display:none;">
    <p>Select AI Difficulty</p>
    <select id="aiDifficulty">
      <option value="practice">Practice</option>
      <option value="easy">Easy</option>
      <option value="medium" selected>Medium</option>
      <option value="hard">Hard</option>
      <option value="extreme">Extreme</option>
    </select>
    <button onclick="startGame(gameMode)">Start Game</button>
  </div>
  <p>Player1: A/D move, W jump, S kick, Q power, E teleport, R atom<br>
     Player2: ←/→ move, ↑ jump, ↓ kick, / power, . teleport, ; atom</p>
</div>
<div id="gameOver" style="display:none;">
  <h1>Game Over!</h1>
  <p id="winner"></p>
  <button onclick="restart()">Restart</button>
</div>

<script>
const canvas=document.getElementById("game");
const ctx=canvas.getContext("2d");
let cw,ch;
function resize(){cw=canvas.width=window.innerWidth;ch=canvas.height=window.innerHeight;}
window.addEventListener("resize",resize);
resize();

let gameMode=null,running=false;
const gravity=0.5;
let players=[],ball,atoms=[],score=[0,0],keys={};

document.addEventListener("keydown",e=>keys[e.key.toLowerCase()]=true);
document.addEventListener("keyup",e=>keys[e.key.toLowerCase()]=false);

class Player{
  constructor(x,color,controls,isAI=false,side=0,difficulty="practice"){
    this.startX=x; this.startY=ch-150;
    this.x=x; this.y=ch-150; this.vx=0; this.vy=0; this.color=color;
    this.controls=controls; this.isAI=isAI; this.side=side; this.difficulty=difficulty;
    this.radius=40; this.powerReady=true; this.tpReady=true; this.atomReady=true;
    this.charge=0; this.teleportFlash=0;
  }
  update(){
    if(this.isAI) this.AI();
    else this.input();
    this.vy+=gravity;
    this.x+=this.vx; this.y+=this.vy;
    if(this.y>ch-100){this.y=ch-100; this.vy=0;}
    if(this.x<50) this.x=50;
    if(this.x>cw-50) this.x=cw-50;
    this.vx*=0.9;
    this.checkBallCollision();
    if(this.charge>0) this.charge-=0.1;
    if(this.teleportFlash>0) this.teleportFlash-=0.05;
  }
  draw(){
    ctx.shadowBlur=this.charge*15; ctx.shadowColor=this.color;
    ctx.fillStyle=this.color;
    ctx.beginPath(); ctx.arc(this.x,this.y,this.radius,0,Math.PI*2); ctx.fill();
    ctx.shadowBlur=0;
    if(this.teleportFlash>0){
      ctx.save();
      ctx.globalAlpha=this.teleportFlash;
      ctx.strokeStyle="#0ff";
      ctx.lineWidth=5;
      ctx.beginPath();
      ctx.arc(this.x,this.y,this.radius+10,0,Math.PI*2);
      ctx.stroke();
      ctx.restore();
    }
  }
  input(){
    const c=this.controls;
    if(keys[c.left]) this.vx-=1.5;
    if(keys[c.right]) this.vx+=1.5;
    if(keys[c.jump] && this.y>=ch-100) this.vy=-12;
    if(keys[c.kick]) this.kick();
    if(keys[c.power] && this.powerReady){ this.powerShoot(); this.powerReady=false; this.charge=1; setTimeout(()=>this.powerReady=true,4000);}
    if(keys[c.tp] && this.tpReady){ this.teleport(); this.tpReady=false; this.teleportFlash=1; setTimeout(()=>this.tpReady=true,5000);}
    if(keys[c.atom] && this.atomReady){ this.atomPower(); this.atomReady=false; setTimeout(()=>this.atomReady=true,6000);}
  }

  AI(){
    if(!ball) return;

    // Target opponent goal
    const targetX = this.side === 0 ? cw-60 : 60;

    let reactionSpeed,jumpChance,kickChance,powerChance,tpChance,atomChance;

    switch(this.difficulty){
      case "practice":
        reactionSpeed=0.2; jumpChance=0.02; kickChance=0.2; powerChance=0.2; tpChance=0.2; atomChance=0.2; break;
      case "easy":
        reactionSpeed=0.5; jumpChance=0.02; kickChance=0.02; powerChance=0.001; tpChance=0.0005; atomChance=0.0005; break;
      case "medium":
        reactionSpeed=1; jumpChance=0.05; kickChance=0.05; powerChance=0.003; tpChance=0.002; atomChance=0.002; break;
      case "hard":
        reactionSpeed=2; jumpChance=0.1; kickChance=0.1; powerChance=0.01; tpChance=0.005; atomChance=0.005; break;
      case "extreme":
        // Extreme AI: predict ball and always aim opponent goal
        const predictedX = ball.x + ball.vx * ((ball.y - this.y)/gravity);
        this.vx = (predictedX - this.x) * 0.3;
        if(this.y >= ch-100 && ball.y < this.y - 30) this.vy = -12;
        if(Math.abs(ball.x - this.x) < 70 && ball.y > this.y - 50) this.kickTowards(targetX);
        if(this.powerReady) { this.powerShootTowards(targetX); this.powerReady=false; this.charge=1; setTimeout(()=>this.powerReady=true,4000);}
        if(this.tpReady) { this.teleport(); this.tpReady=false; this.teleportFlash=1; setTimeout(()=>this.tpReady=true,5000);}
        if(this.atomReady) { this.atomPowerTowards(targetX); this.atomReady=false; setTimeout(()=>this.atomReady=true,6000);}
        return;
    }

    // Random AI for practice/easy/medium/hard
    if(Math.random() < 0.5) this.vx += (ball.x > this.x ? 1 : -1) * reactionSpeed;
    if(ball.y < this.y-50 && this.y>=ch-100 && Math.random()<jumpChance) this.vy=-12;
    if(Math.abs(ball.x-this.x)<70 && ball.y>this.y-50 && Math.random()<kickChance) this.kickTowards(targetX);
    if(this.powerReady && Math.random()<powerChance){ this.powerShootTowards(targetX); this.powerReady=false; this.charge=1; setTimeout(()=>this.powerReady=true,4000);}
    if(this.tpReady && Math.random()<tpChance){ this.teleport(); this.tpReady=false; this.teleportFlash=1; setTimeout(()=>this.tpReady=true,5000);}
    if(this.atomReady && Math.random()<atomChance){ this.atomPowerTowards(targetX); this.atomReady=false; setTimeout(()=>this.atomReady=true,6000);}
  }

  kick(){this.kickTowards(ball.x);}
  powerShoot(){this.powerShootTowards(ball.x);}
  teleport(){const offset=(this.side===0?150:-150); this.x=Math.min(Math.max(ball.x+offset,50),cw-50);}
  atomPower(){this.atomPowerTowards(ball.x);}

  // AI-targeted functions
  kickTowards(targetX){
    const dx = targetX - this.x;
    const dy = ball.y - this.y;
    const dist = Math.hypot(dx,dy);
    if(dist < 150){ball.vx += (dx/dist)*12; ball.vy += (dy/dist)*-8;}
  }
  powerShootTowards(targetX){
    const dx = targetX - this.x;
    const dy = ball.y - this.y;
    const dist = Math.hypot(dx,dy);
    if(dist < 300){ball.vx += (dx/dist)*20; ball.vy += (dy/dist)*-12;}
  }
  atomPowerTowards(targetX){
    const dir = (targetX > this.x ? 1 : -1);
    atoms.push({x:this.x,y:this.y-50,vx:dir*10,vy:-2,color:this.color,dead:false});
  }

  checkBallCollision(){
    const dx=ball.x-this.x,dy=ball.y-this.y;
    const dist=Math.hypot(dx,dy);
    if(dist<this.radius+ball.radius){
      const angle=Math.atan2(dy,dx);
      const force=15;
      ball.vx=Math.cos(angle)*force;
      ball.vy=Math.sin(angle)*force-5;
    }
  }
  reset(){this.x=this.startX; this.y=this.startY; this.vx=0; this.vy=0;}
}

class Ball{
  constructor(){this.reset();}
  reset(){this.x=cw/2; this.y=ch/2; this.vx=0; this.vy=0; this.radius=30; this.trail=[];}
  update(){
    this.vy+=gravity; this.x+=this.vx; this.y+=this.vy;
    if(this.y>ch-60){this.y=ch-60; this.vy*=-0.7; this.vx*=0.95;}
    if(this.x<30){this.vx*=-0.8; this.x=30;}
    if(this.x>cw-30){this.vx*=-0.8; this.x=cw-30;}
    if(this.x<60 && this.y>ch-200) scoreGoal(1);
    if(this.x>cw-60 && this.y>ch-200) scoreGoal(0);
    this.vx*=0.99;
    this.trail.push({x:this.x,y:this.y});
    if(this.trail.length>10) this.trail.shift();
  }
  draw(){
    for(let i=0;i<this.trail.length;i++){
      const t=this.trail[i];
      ctx.fillStyle=`rgba(0,255,255,${i/this.trail.length*0.5})`;
      ctx.beginPath(); ctx.arc(t.x,t.y,this.radius*(i/this.trail.length*0.5+0.2),0,Math.PI*2); ctx.fill();
    }
    ctx.shadowBlur=25; ctx.shadowColor="#0ff";
    ctx.fillStyle="#0ff"; ctx.beginPath(); ctx.arc(this.x,this.y,this.radius,0,Math.PI*2); ctx.fill();
    ctx.shadowBlur=0;
  }
}

function scoreGoal(side){
  // side = goal side, increment opposite side's score
  const scorer = side === 0 ? 1 : 0;
  score[scorer]++;
  updateScore();
  flashBall();
  ball.reset();
}

function flashBall(){ball.flashCount=6;}
function updateScore(){document.getElementById("score").innerText=`${score[0]} : ${score[1]}`;}

function selectMode(mode){
  gameMode=mode;
  if(mode==='pvai' || mode==='aivai'){document.getElementById("difficultyDiv").style.display="block";}
  else startGame(mode);
}

function startGame(mode){
  document.getElementById("menu").style.display="none";
  document.getElementById("gameOver").style.display="none";
  score=[0,0]; updateScore();
  setupGame(mode);
  running=true;
  loop();
}

function setupGame(mode){
  players.length=0; atoms=[];
  const controls1={left:'a',right:'d',jump:'w',kick:'s',power:'q',tp:'e',atom:'r'};
  const controls2={left:'arrowleft',right:'arrowright',jump:'arrowup',kick:'arrowdown',power:'/',tp:'.',atom:';'};
  const difficulty=document.getElementById("aiDifficulty")?.value || "practice";

  if(mode==='pvp'){
    players.push(new Player(cw/4,"#0ff",controls1,false,0));
    players.push(new Player(cw*3/4,"#f00",controls2,false,1));
  }
  else if(mode==='pvai'){
    players.push(new Player(cw/4,"#0ff",controls1,false,0));
    players.push(new Player(cw*3/4,"#f00",controls2,true,1,difficulty));
  }
  else{
    players.push(new Player(cw/4,"#0ff",controls1,true,0,difficulty));
    players.push(new Player(cw*3/4,"#f00",controls2,true,1,difficulty));
  }
  ball=new Ball();
}

function restart(){
  document.getElementById("gameOver").style.display="none";
  score=[0,0]; updateScore();
  ball.reset();
  players.forEach(p=>p.reset());
  running=true; loop();
}

function loop(){
  if(!running) return;
  ctx.clearRect(0,0,cw,ch);
  ctx.fillStyle="#001"; ctx.fillRect(0,ch-200,cw,200);
  ctx.strokeStyle="#0ff"; ctx.lineWidth=2; ctx.strokeRect(50,ch-200,40,200); ctx.strokeRect(cw-90,ch-200,40,200);

  players.forEach(p=>{p.update();p.draw();});
  ball.update(); ball.draw();

  atoms.forEach(a=>{
    a.x+=a.vx; a.y+=a.vy; a.vy+=0.1;
    const dx=ball.x-a.x,dy=ball.y-a.y,dist=Math.hypot(dx,dy);
    if(dist<40){ball.vx+=(dx/dist)*-15; ball.vy+=(dy/dist)*-10; a.dead=true;}
    ctx.shadowBlur=20; ctx.shadowColor=a.color; ctx.fillStyle=a.color; ctx.beginPath(); ctx.arc(a.x,a.y,10,0,Math.PI*2); ctx.fill(); ctx.shadowBlur=0;
  });
  atoms=atoms.filter(a=>!a.dead && a.x>0 && a.x<cw && a.y<ch);

  if(score[0]>=5 || score[1]>=5){
    running=false;
    document.getElementById("winner").innerText = score[0]>score[1] ? "Player 2 Wins!" : "Player 1 Wins!";
    document.getElementById("gameOver").style.display="block";
    return;
  }
  updateScore();
  requestAnimationFrame(loop);
}
</script>
</body>
</html>
