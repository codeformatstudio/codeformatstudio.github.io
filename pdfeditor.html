<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>Cyber PDF Editor</title>
    <link rel="icon" href="icons/icon.png" />
    <script src="https://cdn.jsdelivr.net/npm/pdf-lib/dist/pdf-lib.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/signature_pad/dist/signature_pad.umd.min.js"></script>
    <script src="https://unpkg.com/pdfjs-dist@3.11.174/build/pdf.min.js"></script>
    <script>
        pdfjsLib.GlobalWorkerOptions.workerSrc =
            "https://unpkg.com/pdfjs-dist@3.11.174/build/pdf.worker.min.js";
    </script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
        href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&family=Open+Sans:wght@400;700&family=Lato:wght@400;700&family=Montserrat:wght@400;700&family=Playfair+Display:wght@400;700&family=Poppins:wght@400;700&family=Raleway:wght@400;700&family=Ubuntu:wght@400;700&family=Merriweather:wght@400;700&family=Lora:wght@400;700&family=Oswald:wght@400;700&family=Pacifico&family=Dancing+Script:wght@400;700&family=Caveat:wght@400;700&family=Great+Vibes&family=Satisfy&family=Indie+Flower&family=Fredoka:wght@400;700&family=Inter:wght@400;700&family=Work+Sans:wght@400;700&family=Quicksand:wght@400;700&family=Nunito:wght@400;700&family=Mulish:wght@400;700&family=Outfit:wght@400;700&family=Sora:wght@400;700&family=IBM+Plex+Mono:wght@400;700&family=JetBrains+Mono:wght@400;700&family=Source+Code+Pro:wght@400;700&family=Space+Mono&family=Inconsolata&family=Fira+Code:wght@400;700&family=Cormorant+Garamond:wght@400;700&family=EB+Garamond&family=Cinzel&family=Bodoni+Moda&display=swap"
        rel="stylesheet">
    <style>
        /* ================= CYBER NEON STYLES ================= */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: "Orbitron", sans-serif;
        }

        body,
        html {
            width: 100%;
            height: 100%;
            background: #0a0a0a;
            overflow: hidden;
            color: #0ff;
        }

        #app {
            display: grid;
            grid-template-columns: 220px 1fr 260px;
            height: 100vh;
            transition: all 0.3s ease;
        }

        #app.pages-hidden {
            grid-template-columns: 1fr 260px;
        }

        #app.pages-hidden #pagesPanel {
            display: none;
            width: 0;
        }

        #app.properties-hidden {
            grid-template-columns: 220px 1fr;
        }

        #app.properties-hidden #propertiesPanel {
            display: none;
            width: 0;
        }

        #app.pages-hidden.properties-hidden {
            grid-template-columns: 1fr;
        }

        #app.pages-hidden.properties-hidden #pagesPanel,
        #app.pages-hidden.properties-hidden #propertiesPanel {
            display: none;
            width: 0;
        }




        @media (max-width: 1024px) {
            #app {
                grid-template-columns: 1fr;
                height: 100vh;
            }

            #pagesPanel,
            #propertiesPanel {
                display: none;
            }

            #pagesPanel.mobile-visible,
            #propertiesPanel.mobile-visible {
                display: flex;
                position: fixed;
                z-index: 500;
                top: 0;
                width: 100%;
                height: 70vh;
                max-height: 70vh;
                border: 1px solid #0ff;
            }

            #pagesPanel.mobile-visible {
                left: 0;
                border-right: 1px solid #0ff;
                border-bottom: 1px solid #0ff;
            }

            #propertiesPanel.mobile-visible {
                right: 0;
                border-left: 1px solid #0ff;
                border-bottom: 1px solid #0ff;
            }
        }

        /* Panels */
        #pagesPanel,
        #propertiesPanel {
            background: #111;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            border: 1px solid #0ff;
        }

        #propertiesPanel {
            border-left: 1px solid #0ff;
        }

        .panel-title {
            padding: 12px;
            font-weight: bold;
            background: #111;
            border-bottom: 1px solid #0ff;
            color: #0ff;
        }

        /* Editor */
        #editor {
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        /* Toolbar */
        #toolbar {
            display: flex;
            align-items: center;
            padding: 6px;
            background: #111;
            border-bottom: 1px solid #0ff;
            gap: 5px;
            flex-wrap: wrap;
            overflow-x: auto;
        }

        .tool-btn {
            padding: 8px 12px;
            background: #222;
            color: #0ff;
            border: 2px solid #0ff;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: all 0.2s ease;
            box-shadow: 0 0 8px rgba(0, 255, 255, 0.3);
            touch-action: manipulation;
            -webkit-user-select: none;
            user-select: none;
        }

        .tool-btn:hover,
        .tool-btn:active {
            background: #0ff;
            color: #111;
            box-shadow: 0 0 15px rgba(0, 255, 255, 0.8);
            transform: scale(1.05);
        }

        .tool-btn.active {
            background: #0ff;
            color: #111;
            box-shadow: 0 0 20px rgba(0, 255, 255, 1);
        }

        @media (max-width: 768px) {
            .tool-btn {
                padding: 10px 14px;
                font-size: 14px;
                min-width: 50px;
                touch-action: manipulation;
            }
        }

        /* Tool-specific colors */
        .tool-btn[data-tool="note"] {
            color: #ffff00;
        }

        .tool-btn[data-tool="note"]:hover {
            background: #ffff00;
            color: #000;
            box-shadow: 0 0 15px rgba(255, 255, 0, 0.8);
        }

        .tool-btn[data-tool="note"].active {
            background: #ffff00;
            color: #000;
            box-shadow: 0 0 20px rgba(255, 255, 0, 1);
        }

        .tool-btn[data-tool="arrow"] {
            color: #ff6b6b;
        }

        .tool-btn[data-tool="arrow"]:hover {
            background: #ff6b6b;
            color: #fff;
            box-shadow: 0 0 15px rgba(255, 107, 107, 0.8);
        }

        .tool-btn[data-tool="arrow"].active {
            background: #ff6b6b;
            color: #fff;
            box-shadow: 0 0 20px rgba(255, 107, 107, 1);
        }

        /* Edit Tool Styling */
        .tool-btn[data-tool="edit"] {
            color: #00ff88;
            border-color: #00ff88;
        }

        .tool-btn[data-tool="edit"]:hover {
            background: #00ff88;
            color: #000;
            box-shadow: 0 0 15px rgba(0, 255, 136, 0.8);
        }

        .tool-btn[data-tool="edit"].active {
            background: #00ff88;
            color: #000;
            box-shadow: 0 0 20px rgba(0, 255, 136, 1);
        }

        #zoomIn,
        #zoomOut,
        #zoomFit,
        #undoBtn,
        #redoBtn,
        #deleteBtn,
        #exportPDF,
        #toggleProperties,
        button[onclick*="loadPDF"] {
            padding: 8px 12px;
            background: #222;
            color: #0ff;
            border: 2px solid #0ff;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: bold;
            transition: all 0.2s ease;
            box-shadow: 0 0 8px rgba(0, 255, 255, 0.3);
        }

        #zoomIn:hover,
        #zoomOut:hover,
        #zoomFit:hover,
        #undoBtn:hover,
        #redoBtn:hover,
        #exportPDF:hover,
        button[onclick*="loadPDF"]:hover {
            background: #0ff;
            color: #111;
            box-shadow: 0 0 15px rgba(0, 255, 255, 0.8);
            transform: scale(1.05);
        }

        /* Delete Button Styling */
        #deleteBtn {
            background: #222;
            color: #ff4444;
            border-color: #ff4444;
        }

        #deleteBtn:hover {
            background: #ff4444;
            color: #fff;
            box-shadow: 0 0 15px rgba(255, 68, 68, 0.8);
            transform: scale(1.05);
        }

        #deleteBtn:active {
            background: #cc0000;
            box-shadow: 0 0 20px rgba(255, 68, 68, 1);
        }

        #undoBtn:disabled,
        #redoBtn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        #undoBtn:disabled:hover,
        #redoBtn:disabled:hover {
            transform: none;
            background: #222;
            box-shadow: 0 0 8px rgba(0, 255, 255, 0.3);
        }

        .toolbar-separator {
            width: 1px;
            height: 25px;
            background: #0ff;
            margin: 0 6px;
        }

        /* Sub Toolbar */
        #subToolbar {
            background: #111;
            border-bottom: 1px solid #0ff;
            padding: 6px;
            min-height: 45px;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            align-items: center;
        }

        #subToolbar label {
            display: flex;
            align-items: center;
            gap: 6px;
            color: #0ff;
            font-size: 12px;
        }

        #subToolbar input[type="color"],
        #subToolbar input[type="number"],
        #subToolbar select {
            height: 28px;
            border: 1px solid #0ff;
            border-radius: 3px;
            padding: 2px 4px;
            background: #222;
            color: #0ff;
            cursor: pointer;
        }

        #subToolbar input[type="color"]:hover,
        #subToolbar input[type="number"]:focus,
        #subToolbar select:focus {
            border-color: #fff;
            box-shadow: 0 0 8px rgba(0, 255, 255, 0.4);
        }

        #noteColorPreview {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 1px solid #999;
            border-radius: 2px;
            vertical-align: middle;
        }

        #arrowPreview {
            display: inline-block;
            width: 30px;
            height: 20px;
            border: 1px solid #0ff;
            border-radius: 2px;
            background: #222;
            vertical-align: middle;
        }

        /* Pages container */
        #pageContainer {
            flex: 1;
            overflow: auto;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 25px;
            justify-content: flex-start;
            align-items: center;
            -webkit-user-select: none;
            user-select: none;
        }

        @media (max-width: 768px) {
            #pageContainer {
                padding: 10px;
                gap: 15px;
            }
        }

        .pageCanvasWrapper {
            position: relative;
            display: inline-block;
        }

        .pdfCanvas {
            background: #222;
            box-shadow: 0 0 10px #0ff;
            border-radius: 5px;
            display: block;
            touch-action: none;
        }

        .drawCanvas {
            position: absolute;
            top: 0;
            left: 0;
            cursor: crosshair;
            touch-action: none;
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            user-select: none;
        }

        .drawCanvas.text-tool {
            cursor: text;
        }

        .drawCanvas.select-tool {
            cursor: text;
        }

        @media (max-width: 768px) {

            .pdfCanvas,
            .drawCanvas {
                max-width: 100%;
                height: auto;
            }
        }

        /* Text Input */
        .text-input-area {
            position: absolute;
            background: transparent;
            border: none;
            outline: 2px solid #0ff;
            outline-offset: 2px;
            color: #0ff;
            padding: 0;
            margin: 0;
            border-radius: 0;
            font-family: Arial, sans-serif;
            resize: none;
            overflow: visible;
            z-index: 100;
            min-height: 1.2em;
            line-height: 1.2;
            font-size: 14px;
            box-sizing: border-box;
            cursor: move;
            touch-action: none;
            width: auto;
            white-space: pre-wrap;
            word-wrap: break-word;
            vertical-align: middle;
            display: flex;
            align-items: center;
        }

        .text-input-area:focus {
            outline: 2px solid #00ffff;
            outline-offset: 2px;
        }

        .text-input-area.dragging {
            cursor: grabbing;
        }

        @media (max-width: 768px) {
            .text-input-area {
                font-size: 16px;
                padding: 0;
                min-height: 1.5em;
            }
        }

        /* Note Input */
        .note-input-area {
            position: absolute;
            background: #ffff00;
            border: 1px solid #999;
            outline: 2px solid #ffff00;
            outline-offset: -2px;
            color: #000;
            padding: 4px;
            margin: 0;
            border-radius: 0;
            font-family: Arial, sans-serif;
            resize: none;
            overflow: visible;
            z-index: 100;
            min-height: 1.2em;
            line-height: 1.2;
            font-size: 15px;
            box-sizing: border-box;
            cursor: move;
            touch-action: none;
            opacity: 0.9;
            width: auto;
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        .note-input-area:focus {
            outline: 2px solid #000;
            outline-offset: -2px;
            opacity: 1;
        }

        .note-input-area.dragging {
            cursor: grabbing;
        }

        @media (max-width: 768px) {
            .note-input-area {
                font-size: 16px;
                padding: 4px;
                min-height: 1.5em;
            }
        }

        /* Thumbnails */
        #pagesList {
            padding: 10px;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .thumbnail {
            width: 100%;
            cursor: pointer;
            border: 2px solid transparent;
            border-radius: 3px;
            transition: all 0.2s ease;
        }

        .thumbnail:hover {
            border-color: #0ff;
            box-shadow: 0 0 8px rgba(0, 255, 255, 0.4);
        }

        .thumbnail.selected {
            border-color: #0ff;
            box-shadow: 0 0 12px rgba(0, 255, 255, 0.8);
        }

        /* Page Preview Modal */
        #pagePreviewModal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.85);
            z-index: 999;
            justify-content: center;
            align-items: center;
        }

        #pagePreviewModal.active {
            display: flex;
        }

        .page-preview-content {
            background: #111;
            border: 2px solid #0ff;
            border-radius: 8px;
            padding: 20px;
            max-width: 90vw;
            max-height: 90vh;
            display: flex;
            flex-direction: column;
            gap: 15px;
            box-shadow: 0 0 30px rgba(0, 255, 255, 0.6);
        }

        .page-preview-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: #0ff;
            padding-bottom: 10px;
            border-bottom: 1px solid #0ff;
        }

        .page-preview-header h2 {
            margin: 0;
            font-size: 20px;
        }

        .page-preview-close {
            background: none;
            border: none;
            color: #0ff;
            font-size: 24px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .page-preview-close:hover {
            transform: scale(1.2);
            color: #fff;
        }

        .page-preview-canvas {
            max-width: 100%;
            max-height: 60vh;
            border: 1px solid #0ff;
            border-radius: 4px;
            background: #222;
        }

        .page-preview-footer {
            display: flex;
            gap: 10px;
            justify-content: center;
        }

        .page-preview-btn {
            padding: 10px 20px;
            background: #222;
            color: #0ff;
            border: 2px solid #0ff;
            border-radius: 6px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.2s ease;
        }

        .page-preview-btn:hover {
            background: #0ff;
            color: #111;
            box-shadow: 0 0 15px rgba(0, 255, 255, 0.8);
        }

        .page-preview-info {
            color: #0ff;
            text-align: center;
            font-size: 14px;
            opacity: 0.8;
        }

        /* Properties Panel */
        #propertiesContent {
            padding: 10px;
            display: flex;
            flex-direction: column;
            gap: 8px;
            overflow-y: auto;
        }

        #propertiesContent input,
        #propertiesContent select {
            padding: 4px;
            border-radius: 3px;
            border: none;
            background: #222;
            color: #0ff;
        }

        #propertiesContent fieldset {
            border: 1px solid #0ff;
            border-radius: 3px;
            padding: 6px;
            margin: 4px 0;
        }

        #propertiesContent legend {
            color: #0ff;
            font-size: 12px;
        }

        #propertiesContent label {
            display: flex;
            flex-direction: column;
            gap: 2px;
            font-size: 12px;
            margin: 4px 0;
        }

        /* Signature Modal */
        #signatureModal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        #signatureModal.active {
            display: flex;
        }

        .signature-modal-content {
            background: #111;
            border: 2px solid #0ff;
            border-radius: 8px;
            padding: 20px;
            width: 90%;
            max-width: 500px;
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.5);
        }

        .signature-modal-content h2 {
            color: #0ff;
            margin-bottom: 20px;
            text-align: center;
        }

        .signature-mode-selector {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            justify-content: center;
        }

        .signature-mode-btn {
            padding: 10px 20px;
            background: #222;
            color: #0ff;
            border: 2px solid #0ff;
            border-radius: 6px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.2s ease;
        }

        .signature-mode-btn.active {
            background: #0ff;
            color: #111;
        }

        .signature-mode-btn:hover {
            box-shadow: 0 0 10px rgba(0, 255, 255, 0.6);
        }

        #signatureDrawCanvas {
            border: 2px solid #0ff;
            border-radius: 6px;
            background: #222;
            display: block;
            width: 100%;
            max-width: 450px;
            height: 200px;
            cursor: crosshair;
            margin: 0 auto 15px;
        }

        #signatureDrawCanvas.hidden {
            display: none;
        }

        #signatureTypeInput {
            width: 100%;
            padding: 12px;
            background: #222;
            color: #0ff;
            border: 2px solid #0ff;
            border-radius: 6px;
            font-size: 40px;
            text-align: center;
            font-family: cursive;
            margin-bottom: 15px;
        }

        #signatureTypeInput.hidden {
            display: none;
        }

        .signature-preview {
            background: #222;
            border: 2px solid #0ff;
            border-radius: 6px;
            padding: 15px;
            margin: 15px 0;
            text-align: center;
            min-height: 100px;
            color: #0ff;
        }

        #signaturePreviewCanvas {
            max-width: 100%;
            max-height: 150px;
            border-radius: 3px;
        }

        /* Mobile-specific styles */
        @media (max-width: 768px) {

            /* Prevent zoom on double-tap */
            input,
            button,
            textarea {
                font-size: 16px;
            }

            /* Improve button tap area */
            button {
                min-height: 44px;
                min-width: 44px;
            }

            /* Mobile button styling */
            #deleteBtn {
                padding: 10px 14px;
            }

            .tool-btn[data-tool="edit"] {
                padding: 10px 14px;
            }

            /* Better modal sizing on mobile */
            .signature-modal-content,
            .page-preview-content {
                max-width: 95vw;
                max-height: 95vh;
                margin: 0 auto;
            }

            #signatureDrawCanvas {
                height: 250px;
                max-width: 100%;
            }

            /* Better toolbar on mobile */
            #subToolbar {
                flex-direction: row;
                overflow-x: auto;
            }

            #subToolbar label {
                white-space: nowrap;
                flex-shrink: 0;
            }
        }

        /* Prevent unwanted zoom/pan behavior on touch devices */
        input[type="color"],
        input[type="range"] {
            -webkit-appearance: none;
            appearance: none;
        }

        .signature-modal-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
        }

        .signature-modal-buttons button {
            padding: 10px 20px;
            border: 2px solid #0ff;
            border-radius: 6px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.2s ease;
        }

        .signature-modal-buttons .confirm-btn {
            background: #0ff;
            color: #111;
        }

        .signature-modal-buttons .confirm-btn:hover {
            box-shadow: 0 0 15px rgba(0, 255, 255, 0.8);
        }

        .signature-modal-buttons .cancel-btn {
            background: #222;
            color: #0ff;
        }

        .signature-modal-buttons .cancel-btn:hover {
            background: #333;
        }

        .signature-manage-btn {
            margin-top: 10px;
            padding: 6px 12px;
            background: #222;
            color: #0ff;
            border: 1px solid #0ff;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            width: 100%;
        }

        .signature-manage-btn:hover {
            background: #333;
        }

        /* Responsive Design */

        /* Desktop: 1440px+ */
        @media (min-width: 1440px) {
            #app {
                grid-template-columns: 220px 1fr 300px;
            }
        }

        /* Laptop: 1024px - 1439px */
        @media (max-width: 1439px) and (min-width: 1024px) {
            #app {
                grid-template-columns: 200px 1fr 260px;
            }

            .tool-btn {
                padding: 8px 10px;
                font-size: 13px;
            }
        }

        /* Tablet Landscape: 768px - 1023px */
        @media (max-width: 1023px) and (min-width: 768px) {
            #app {
                grid-template-columns: 90px 1fr;
            }

            #propertiesPanel {
                display: none;
            }

            #pagesPanel {
                width: 90px;
            }

            .tool-btn {
                padding: 6px 6px;
                font-size: 11px;
            }

            #toolbar {
                padding: 5px;
                gap: 3px;
                flex-wrap: wrap;
            }

            .toolbar-separator {
                height: 20px;
                margin: 0 4px;
            }

            #pageContainer {
                padding: 12px;
                gap: 15px;
            }
        }

        /* Tablet Portrait: 600px - 767px */
        @media (max-width: 767px) and (min-width: 600px) {
            #app {
                grid-template-columns: 1fr;
            }

            #pagesPanel,
            #propertiesPanel {
                display: none;
            }

            #toolbar {
                padding: 4px;
                gap: 2px;
                overflow-x: auto;
                flex-wrap: nowrap;
            }

            .tool-btn {
                padding: 5px 6px;
                font-size: 10px;
                white-space: nowrap;
                flex-shrink: 0;
            }

            .toolbar-separator {
                display: none;
            }

            #zoomLabel {
                font-size: 11px;
                min-width: 40px;
            }

            #zoomIn,
            #zoomOut {
                padding: 5px 6px;
                font-size: 10px;
            }

            #pageContainer {
                padding: 8px;
                gap: 12px;
            }

            .pdfCanvas {
                max-width: 100%;
                height: auto;
            }

            .text-input-area {
                max-width: 90vw;
                font-size: 14px !important;
            }
        }

        /* Mobile: 480px - 599px */
        @media (max-width: 599px) and (min-width: 480px) {
            #app {
                grid-template-columns: 1fr;
            }

            #pagesPanel,
            #propertiesPanel {
                display: none;
            }

            #toolbar {
                padding: 3px;
                gap: 1px;
                overflow-x: auto;
                flex-wrap: nowrap;
            }

            .tool-btn {
                padding: 4px 5px;
                font-size: 9px;
                white-space: nowrap;
                flex-shrink: 0;
                min-width: 35px;
                min-height: 35px;
            }

            .toolbar-separator {
                display: none;
            }

            #zoomLabel {
                font-size: 9px;
                min-width: 35px;
            }

            #zoomIn,
            #zoomOut {
                padding: 4px 5px;
                font-size: 9px;
                min-width: 35px;
            }

            #pageContainer {
                padding: 6px;
                gap: 10px;
            }

            #subToolbar {
                padding: 3px;
                min-height: 40px;
                font-size: 10px;
                overflow-x: auto;
            }

            #subToolbar label {
                font-size: 10px;
                display: inline-block;
                margin-right: 8px;
                white-space: nowrap;
            }

            #subToolbar input,
            #subToolbar select {
                max-width: 70px;
                font-size: 10px;
                padding: 2px;
            }
        }

        /* Small Mobile: 360px - 479px */
        @media (max-width: 479px) and (min-width: 360px) {
            #app {
                grid-template-columns: 1fr;
            }

            #pagesPanel,
            #propertiesPanel {
                display: none;
            }

            #toolbar {
                padding: 2px;
                gap: 1px;
                overflow-x: auto;
                flex-wrap: nowrap;
            }

            .tool-btn {
                padding: 3px 4px;
                font-size: 8px;
                white-space: nowrap;
                flex-shrink: 0;
                min-width: 32px;
                min-height: 32px;
            }

            .toolbar-separator {
                display: none;
            }

            #zoomLabel {
                display: none;
            }

            #zoomIn,
            #zoomOut {
                padding: 3px 4px;
                font-size: 8px;
                min-width: 32px;
            }

            #pageContainer {
                padding: 4px;
                gap: 8px;
            }

            #subToolbar {
                padding: 2px;
                min-height: 35px;
                font-size: 9px;
                overflow-x: auto;
            }

            #subToolbar label {
                font-size: 9px;
                display: inline-block;
                margin-right: 6px;
                white-space: nowrap;
            }

            #subToolbar input,
            #subToolbar select {
                max-width: 60px;
                font-size: 9px;
                padding: 2px;
            }
        }

        /* Extra Small Mobile: <360px */
        @media (max-width: 359px) {
            #app {
                grid-template-columns: 1fr;
            }

            #pagesPanel,
            #propertiesPanel {
                display: none;
            }

            #toolbar {
                padding: 1px;
                gap: 0;
                overflow-x: auto;
            }

            .tool-btn {
                padding: 2px 3px;
                font-size: 7px;
                white-space: nowrap;
                flex-shrink: 0;
                min-width: 28px;
                min-height: 28px;
                border-width: 1px;
            }

            .toolbar-separator {
                display: none;
            }

            #zoomLabel {
                display: none;
            }

            #zoomIn,
            #zoomOut {
                padding: 2px 3px;
                font-size: 7px;
                min-width: 28px;
            }

            #pageContainer {
                padding: 2px;
                gap: 4px;
            }

            #subToolbar {
                padding: 1px;
                min-height: 30px;
                font-size: 8px;
            }
        }

        .cancel-btn {
            background: #c00;
        }
    </style>
</head>

<body>
    <div id="app">
        <!-- Left Pages Panel -->
        <aside id="pagesPanel">
            <div class="panel-title">Pages</div>
            <div id="pagesList"></div>
        </aside>

        <!-- Editor -->
        <main id="editor">
            <header id="toolbar">
                <button id="toggleSidebar" class="tool-btn" title="Toggle Pages Panel">‚ò∞</button>
                <div class="toolbar-separator"></div>
                <button class="tool-btn" data-tool="select" title="Select Tool (A)">
                    ùô∏
                </button>
                <button class="tool-btn" data-tool="text" title="Text Tool (T)">
                    üìù
                </button>
                <button class="tool-btn" data-tool="edit" title="Edit Tool (E) - Edit Text & Drag Objects">
                    ‚úèÔ∏è
                </button>
                <button class="tool-btn" data-tool="pen" title="Pen Tool">üñãÔ∏è</button>
                <button class="tool-btn" data-tool="highlight" title="Highlight Tool">
                    üîÜ
                </button>
                <button class="tool-btn" data-tool="shape" title="Shape Tool">
                    ‚¨ú
                </button>
                <button class="tool-btn" data-tool="signature" title="Signature">
                    ‚úçÔ∏è
                </button>
                <button class="tool-btn" data-tool="eraser" title="Eraser (Delete Selected)">üóëÔ∏è</button>
                <button class="tool-btn" data-tool="note" title="Add Note">üí¨</button>
                <button class="tool-btn" data-tool="arrow" title="Arrow">‚û°Ô∏è</button>
                <div class="toolbar-separator"></div>
                <button id="deleteBtn" title="Delete Selected (DEL)">‚ùå</button>
                <button id="undoBtn" title="Undo">‚Ü∂</button>
                <button id="redoBtn" title="Redo">‚Ü∑</button>
                <div class="toolbar-separator"></div>
                <button id="zoomFit" title="Fit to Page">‚óªÔ∏è</button>
                <button id="zoomOut" title="Zoom Out">üîç‚àí</button>
                <span id="zoomLabel">100%</span>
                <button id="zoomIn" title="Zoom In">üîç+</button>
                <div class="toolbar-separator"></div>
                <input type="file" id="loadPDF" accept="application/pdf" hidden />
                <button onclick="document.getElementById('loadPDF').click()" title="Load PDF">
                    üìÇ
                </button>
                <button id="exportPDF" title="Export PDF">üíæ</button>
                <div class="toolbar-separator"></div>
                <button id="toggleProperties" class="properties-toggle-btn" title="Toggle Properties Panel">‚öôÔ∏è</button>
            </header>
            <div id="subToolbar"></div>
            <div id="pageContainer"></div>
        </main>

        <!-- Right Properties Panel -->
        <aside id="propertiesPanel">
            <div class="panel-title">Properties</div>
            <div id="propertiesContent">Select a tool</div>
        </aside>
    </div>

    <!-- Page Preview Modal -->
    <div id="pagePreviewModal">
        <div class="page-preview-content">
            <div class="page-preview-header">
                <h2 id="pagePreviewTitle">Page 1</h2>
                <button class="page-preview-close" id="closePreview">‚úï</button>
            </div>
            <canvas id="pagePreviewCanvas" class="page-preview-canvas"></canvas>
            <div class="page-preview-info">
                <div id="pagePreviewInfo">Page 1 of 1</div>
            </div>
            <div class="page-preview-footer">
                <button class="page-preview-btn" id="prevPageBtn">‚Üê Previous</button>
                <button class="page-preview-btn" id="goToPageBtn">Go to Page</button>
                <button class="page-preview-btn" id="nextPageBtn">Next ‚Üí</button>
            </div>
        </div>
    </div>

    <!-- Signature Modal -->
    <div id="signatureModal">
        <div class="signature-modal-content">
            <h2>Manage Your Signature</h2>

            <div class="signature-mode-selector">
                <button class="signature-mode-btn active" data-mode="draw">
                    ‚úèÔ∏è Draw
                </button>
                <button class="signature-mode-btn" data-mode="type">üìù Type</button>
            </div>

            <canvas id="signatureDrawCanvas"></canvas>
            <input type="text" id="signatureTypeInput" class="hidden" placeholder="Type your signature..." />

            <div class="signature-preview">
                <div>Preview:</div>
                <canvas id="signaturePreviewCanvas"></canvas>
            </div>

            <div class="signature-modal-buttons">
                <button class="confirm-btn" id="confirmSignature">‚úì Save</button>
                <button class="cancel-btn" id="cancelSignature">‚úï Cancel</button>
                <button class="cancel-btn" id="clearSignature">
                    üóëÔ∏è Clear
                </button>
            </div>
        </div>
    </div>

    <script src="pdfeditor.js"></script>
</body>

</html>
